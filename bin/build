#!/bin/bash

cleanup() {
  rm .buildlock
  exit $?
}

trap cleanup SIGINT

if [[ ! -f .buildlock ]]; then
  touch .buildlock
  yarn build
  cleanup
else
  echo "Build already in progress... skipping. If this is a mistake, delete .buildlock in the project root"
fi
